<!DOCTYPE html> <html lang="zh-CN"> <head prefix="og: http://ogp.me/ns#"> <!-- Google tag (gtag.js) --> <script async src="https://www.googletagmanager.com/gtag/js?id=G-TR6561YDNK"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-TR6561YDNK'); </script> <meta charset="UTF-8" /> <meta http-equiv="X-UA-Compatible" content="ie=edge" /> <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <meta name="mobile-web-app-capable" content="yes" /> <meta name="apple-mobile-web-app-capable" content="yes" /> <meta name="application-name" content="Clarmy.me" /> <meta name="apple-mobile-web-app-status-bar-style" content="#fff" /> <meta name="apple-mobile-web-app-title" content="Clarmy.me" /> <title> 推荐几个民航机场 METAR 报文的数据源 - Clarmy.me </title> <link rel="alternate" href="https://clarmy.me/recommend-metar-data-sources/" hreflang="zh-CN" /> <link rel="canonical" href="https://clarmy.me/recommend-metar-data-sources/" /> <meta name="description" content="前几天我写了一篇关于解译 METAR 报文的文章：优雅地解译机场 METAR 报文，其中提到 METAR 报文作为全球共享的公共数据，可以从多个渠道免费获得，那么今天我就来盘点几个公开提供 METAR 报文源的网络资源。" /> <meta name="referrer" content="no-referrer-when-downgrade" /> <meta property="fb:app_id" content="" /> <meta property="og:site_name" content="推荐几个民航机场 METAR 报文的数据源 | Clarmy" /> <meta property="og:title" content="推荐几个民航机场 METAR 报文的数据源 | Clarmy" /> <meta property="og:type" content="website" /> <meta property="og:url" content="https://clarmy.me/recommend-metar-data-sources/" /> <meta property="og:description" content="前几天我写了一篇关于解译 METAR 报文的文章：优雅地解译机场 METAR 报文，其中提到 METAR 报文作为全球共享的公共数据，可以从多个渠道免费获得，那么今天我就来盘点几个公开提供 METAR 报文源的网络资源。" /> <meta property="og:image" content="https://clarmy.me/assets/img/ogp.png" /> <meta property="og:image:width" content="640" /> <meta property="og:image:height" content="640" /> <meta name="twitter:card" content="summary" /> <meta name="twitter:title" content="推荐几个民航机场 METAR 报文的数据源 | " /> <meta name="twitter:url" content="https://clarmy.me/recommend-metar-data-sources/" /> <meta name="twitter:site" content="@" /> <meta name="twitter:creator" content="@" /> <meta name="twitter:description" content="前几天我写了一篇关于解译 METAR 报文的文章：优雅地解译机场 METAR 报文，其中提到 METAR 报文作为全球共享的公共数据，可以从多个渠道免费获得，那么今天我就来盘点几个公开提供 METAR 报文源的网络资源。" /> <meta name="twitter:image" content="https://clarmy.me/assets/img/ogp.png" /> <link type="application/atom+xml" rel="alternate" href="https://clarmy.me/feed.xml" title="Clarmy.me" /> <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicons/apple-touch-icon.png" /> <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png" /> <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png" /> <link rel="manifest" href="/assets/favicons/site.webmanifest" /> <link rel="mask-icon" href="/assets/favicons/safari-pinned-tab.svg" color="#5bbad5" /> <meta name="apple-mobile-web-app-title" content="Jekyll Klise" /> <meta name="application-name" content="Jekyll Klise" /> <meta name="msapplication-TileColor" content="#da532c" /> <meta name="theme-color" content="#2c2c2c" /> <link rel="stylesheet" href="/assets/css/style.css" /> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"> <!-- for mathjax support --> </head> <body data-theme="dark" class="notransition"> <script> const body = document.body; const data = body.getAttribute("data-theme"); const initTheme = (state) => { if (state === "dark") { body.setAttribute("data-theme", "dark"); } else if (state === "light") { body.removeAttribute("data-theme"); } else { localStorage.setItem("theme", data); } }; initTheme(localStorage.getItem("theme")); setTimeout(() => body.classList.remove("notransition"), 75); </script> <div class="navbar" role="navigation"> <nav class="menu"> <input type="checkbox" id="menu-trigger" class="menu-trigger" /> <label for="menu-trigger"> <span class="menu-icon"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <path d="M64,384H448V341.33H64Zm0-106.67H448V234.67H64ZM64,128v42.67H448V128Z" /> </svg> </span> </label> <a id="mode"> <svg class="mode-sunny" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <title>LIGHT</title> <line x1="256" y1="48" x2="256" y2="96" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="256" y1="416" x2="256" y2="464" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="108.92" x2="369.14" y2="142.86" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="369.14" x2="108.92" y2="403.08" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="464" y1="256" x2="416" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="96" y1="256" x2="48" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="403.08" x2="369.14" y2="369.14" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="142.86" x2="108.92" y2="108.92" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <circle cx="256" cy="256" r="80" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> </svg> <svg class="mode-moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <title>DARK</title> <line x1="256" y1="48" x2="256" y2="96" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="256" y1="416" x2="256" y2="464" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="108.92" x2="369.14" y2="142.86" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="369.14" x2="108.92" y2="403.08" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="464" y1="256" x2="416" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="96" y1="256" x2="48" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="403.08" x2="369.14" y2="369.14" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="142.86" x2="108.92" y2="108.92" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <circle cx="256" cy="256" r="80" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> </svg> </a> <div class="trigger"> <div class="trigger-container"><a class="menu-link" href="/">主页</a><a class="menu-link" href="/archive/">归档</a><a class="menu-link" href="/tags/">标签</a><a class="menu-link" href="/about/">关于</a><a class="menu-link rss" href="/feed.xml"> <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 512 512" fill="#ED812E" > <title>RSS</title> <path d="M108.56,342.78a60.34,60.34,0,1,0,60.56,60.44A60.63,60.63,0,0,0,108.56,342.78Z" /> <path d="M48,186.67v86.55c52,0,101.94,15.39,138.67,52.11s52,86.56,52,138.67h86.66C325.33,312.44,199.67,186.67,48,186.67Z" /> <path d="M48,48v86.56c185.25,0,329.22,144.08,329.22,329.44H464C464,234.66,277.67,48,48,48Z" /> </svg> </a> </div> </div> </nav> </div> <div class="wrapper post"> <main class="page-content" aria-label="Content"> <article itemscope itemtype="https://schema.org/BlogPosting"> <header class="header"> <div class="tags"> <span itemprop="keywords"> <a class="tag" href="/tags/#metar">METAR</a>, <a class="tag" href="/tags/#航空气象">航空气象</a> </span> </div> <h1 class="header-title" itemprop="headline">推荐几个民航机场 METAR 报文的数据源</h1> <div class="post-meta"> <time datetime="2024-02-03T00:00:00+08:00" itemprop="datePublished"> 2024-02-03 </time> <span itemprop="author" itemscope itemtype="https://schema.org/Person"> <span itemprop="name">Clarmy</span> </span> <time hidden datetime="2024-02-03T00:00:00+08:00" itemprop="dateModified"> 2024-02-03 </time> <span hidden itemprop="publisher" itemtype="Person">Clarmy</span> <span hidden itemprop="image"></span> <span hidden itemprop="mainEntityOfPage"><p>前几天我写了一篇关于解译 METAR 报文的文章： <a href="/elegantly-interpreting-airport-metar-reports/"><em>「优雅地解译机场 METAR 报文」</em></a>，其中提到 METAR 报文作为全球共享的公共数据，可以从多个渠道免费获得，那么今天我就来盘点几个公开提供 METAR 报文源的网络资源。</p> </span> </div> </header> <div class="page-content" itemprop="articleBody"> <p>前几天我写了一篇关于解译 METAR 报文的文章： <a href="/elegantly-interpreting-airport-metar-reports/"><em>「优雅地解译机场 METAR 报文」</em></a>，其中提到 METAR 报文作为全球共享的公共数据，可以从多个渠道免费获得，那么今天我就来盘点几个公开提供 METAR 报文源的网络资源。</p> <h2 id="美国航空天气中心"> <a href="#美国航空天气中心" class="anchor-head"></a> 美国航空天气中心 </h2> <p>主页网址：<a href="https://aviationweather.gov">https://aviationweather.gov</a></p> <p><img src="/assets/img/recommend-metar-data-sources/01.webp" alt="01" /></p> <p>美国航空天气中心（Aviation Weather Center, AWC）是美国政府对外提供公开航空信息服务的网站，它隶属于美国国家天气服务（National Weather Service, NWS）。该网站提供相对全面的航空气象信息服务，且并不仅限于美国本土，它可以提供它收集来的全球大多数国家机场或航司公开共享的航空信息，包括但不限于终端观测、预报、飞行员报等丰富的数据产品。AWC 除了提供网页可视化的服务，也公开免费提供后端 API 接口服务，也就是说它是欢迎你用爬虫通过接口去他抓它的数据的。</p> <p>后端 API 接口说明文档：<a href="https://aviationweather.gov/data/api/#/">https://aviationweather.gov/data/api/#/</a></p> <p><img src="/assets/img/recommend-metar-data-sources/02.webp" alt="02" /></p> <p>它的接口文档看样子使用的是 Swagger UI 框架实现的，既可以作为文档阅读，也可以现场测试，不要太方便。</p> <p><img src="/assets/img/recommend-metar-data-sources/03.gif" alt="03" /></p> <p>我们根据它的文档，用后端调用一下接口：</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">requests</span>

<span class="n">URL</span> <span class="o">=</span> <span class="sh">'</span><span class="s">https://aviationweather.gov/api/data/metar?ids=ZBAA&amp;format=raw&amp;taf=false&amp;hours=1</span><span class="sh">'</span>

<span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">URL</span><span class="p">)</span>
<span class="n">resp</span><span class="p">.</span><span class="n">text</span><span class="p">.</span><span class="nf">strip</span><span class="p">().</span><span class="nf">split</span><span class="p">(</span><span class="sh">'</span><span class="se">\n</span><span class="sh">'</span><span class="p">)</span>
</code></pre></div></div> <p>返回的结果：</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>['ZBAA 020730Z 19003MPS 160V220 CAVOK M01/M15 Q1034 NOSIG',
 'ZBAA 020700Z VRB03MPS CAVOK M01/M15 Q1033 NOSIG']
</code></pre></div></div> <p>是不是很简单，而且如果你把 <code class="language-plaintext highlighter-rouge">format=raw</code> 参数改成 <code class="language-plaintext highlighter-rouge">format=json</code>，它还可以自动帮你把报文解译成 json 格式的数据。</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>URL = 'https://aviationweather.gov/api/data/metar?ids=ZGGG&amp;format=json&amp;taf=false&amp;hours=1'
</code></pre></div></div> <p>返回结果（json 格式美化后）：</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[{</span><span class="nl">"metar_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">490844811</span><span class="p">,</span><span class="w">
  </span><span class="nl">"icaoId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ZGGG"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"receiptTime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-02-02 07:35:22"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"obsTime"</span><span class="p">:</span><span class="w"> </span><span class="mi">1706859000</span><span class="p">,</span><span class="w">
  </span><span class="nl">"reportTime"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-02-02 07:30:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"temp"</span><span class="p">:</span><span class="w"> </span><span class="mi">29</span><span class="p">,</span><span class="w">
  </span><span class="nl">"dewp"</span><span class="p">:</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w">
  </span><span class="nl">"wdir"</span><span class="p">:</span><span class="w"> </span><span class="mi">170</span><span class="p">,</span><span class="w">
  </span><span class="nl">"wspd"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w">
  </span><span class="nl">"wgst"</span><span class="p">:</span><span class="w"> </span><span class="err">None</span><span class="p">,</span><span class="w">
  </span><span class="nl">"visib"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6+"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"altim"</span><span class="p">:</span><span class="w"> </span><span class="mi">1014</span><span class="p">,</span><span class="w">
  </span><span class="nl">"slp"</span><span class="p">:</span><span class="w"> </span><span class="err">None</span><span class="p">,</span><span class="w">
  </span><span class="nl">"qcField"</span><span class="p">:</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span><span class="w">
  </span><span class="nl">"wxString"</span><span class="p">:</span><span class="w"> </span><span class="err">None</span><span class="p">,</span><span class="w">
  </span><span class="nl">"presTend"</span><span class="p">:</span><span class="w"> </span><span class="err">None</span><span class="p">,</span><span class="w">
  </span><span class="nl">"maxT"</span><span class="p">:</span><span class="w"> </span><span class="err">None</span><span class="p">,</span><span class="w">
  </span><span class="nl">"minT"</span><span class="p">:</span><span class="w"> </span><span class="err">None</span><span class="p">,</span><span class="w">
  </span><span class="nl">"maxT24"</span><span class="p">:</span><span class="w"> </span><span class="err">None</span><span class="p">,</span><span class="w">
  </span><span class="nl">"minT24"</span><span class="p">:</span><span class="w"> </span><span class="err">None</span><span class="p">,</span><span class="w">
  </span><span class="nl">"precip"</span><span class="p">:</span><span class="w"> </span><span class="err">None</span><span class="p">,</span><span class="w">
  </span><span class="nl">"pcp3hr"</span><span class="p">:</span><span class="w"> </span><span class="err">None</span><span class="p">,</span><span class="w">
  </span><span class="nl">"pcp6hr"</span><span class="p">:</span><span class="w"> </span><span class="err">None</span><span class="p">,</span><span class="w">
  </span><span class="nl">"pcp24hr"</span><span class="p">:</span><span class="w"> </span><span class="err">None</span><span class="p">,</span><span class="w">
  </span><span class="nl">"snow"</span><span class="p">:</span><span class="w"> </span><span class="err">None</span><span class="p">,</span><span class="w">
  </span><span class="nl">"vertVis"</span><span class="p">:</span><span class="w"> </span><span class="err">None</span><span class="p">,</span><span class="w">
  </span><span class="nl">"metarType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"METAR"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"rawOb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ZGGG 020730Z 17006MPS 9999 SCT040 29/18 Q1014 NOSIG"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"mostRecent"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"lat"</span><span class="p">:</span><span class="w"> </span><span class="mf">23.392</span><span class="p">,</span><span class="w">
  </span><span class="nl">"lon"</span><span class="p">:</span><span class="w"> </span><span class="mf">113.307</span><span class="p">,</span><span class="w">
  </span><span class="nl">"elev"</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w">
  </span><span class="nl">"prior"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Guangzhou/Baiyun Intl, GD, CN"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"clouds"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="nl">"cover"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SCT"</span><span class="p">,</span><span class="w"> </span><span class="nl">"base"</span><span class="p">:</span><span class="w"> </span><span class="mi">4000</span><span class="p">}]}]</span><span class="w">
</span></code></pre></div></div> <p>此外你也可以通过修改 URL 中的 <code class="language-plaintext highlighter-rouge">hours</code> 参数来指定要回溯查找过去多少个小时的数据，例如 <code class="language-plaintext highlighter-rouge">hours=5</code> 表示回溯查找到5个小时前的数据，最长支持约一个月（720个小时）的回溯。</p> <p>其他数据和使用方法可以参考文档的内容做探索。</p> <h2 id="美国国家天气服务"> <a href="#美国国家天气服务" class="anchor-head"></a> 美国国家天气服务 </h2> <p>主页地址：<a href="https://www.weather.gov">https://www.weather.gov</a></p> <p><img src="/assets/img/recommend-metar-data-sources/04.webp" alt="04" /></p> <p>美国国家天气服务（National Weather Service, NWS）是美国政府的一个机构，隶属于美国商务部下的国家海洋和大气管理局（National Oceanic and Atmospheric Administration, NOAA）。</p> <p>前面提到的 AWC 就是 NWS 的子机构，从航空 METAR 报文的角度来说，NWS 除了在 AWC 这个渠道公布数据以外，自己也会通过另一个渠道分享全量的气象数据（其中也包括 METAR 报告）：匿名 FTP。数据说明页面：<a href="https://www.weather.gov/tg/engfiles">https://www.weather.gov/tg/engfiles</a></p> <p><img src="/assets/img/recommend-metar-data-sources/05.webp" alt="05" /></p> <p>网站中关于匿名 FTP 的说明，翻译如下：</p> <blockquote> <p>美国国家气象服务提供匿名FTP访问，以获取包含单个编码观测和文本警告以及预报的文件，这些文件存放在一个特别的“英文描述格式”目录和文件名结构下。国际航空数据、美国警告和所有类型的水文气象预报的内容按照源头传输的方式存储，但它们被解析成使用站点ID或警告和预报区域指示符的文件名，或者通过AWIPS通信标识符进行分离。文件的内部内容为ASCII字符代码。文件的命名约定用英语拼写或由NWS区域指示符名称定义，使用“区域指示符”或“县警告区域”编号来反映文件内容的地理位置。数据可通过匿名FTP在URL tgftp.nws.noaa.gov/data处获取。有一个帮助指南展示了如何访问服务器并检索文件。</p> </blockquote> <p>也就是说，我们可以使用任何合适的 FTP 客户端（比如 Windows 的 XFTP、Mac 的 Finder），直接以 FTP 的协议访问 Host: tgftp.nws.noaa.gov/data 即可，用户名和密码留空即可访问。或者你也可以在浏览器里直接访问：<a href="https://tgftp.nws.noaa.gov/data/">https://tgftp.nws.noaa.gov/data/</a> 以 HTTP 的方式访问 FTP 资源。</p> <p><img src="/assets/img/recommend-metar-data-sources/06.webp" alt="06" /></p> <p>该 FTP 服务存储了他们所声称的所有公开的数据，对于我们想要的 METAR 报文数据，只需要按照 observations/ -&gt; metar/ -&gt; stations/ 的顺序依次点开目录即可。</p> <p><img src="/assets/img/recommend-metar-data-sources/07.webp" alt="07" /></p> <p>这里存储他们从全世界所能搜集到的所有的 METAR 原始报文，按照直观统计有 1.1w 个机场（实际上保持更新的比这个数量少，有很多机场的数据不再更新），我们点开昆明长水机场所对应的 ICAO 码: ZPPP.TXT ，可以看到长水机场的最新 METAR 报文（行文至此的当前时间为北京时间2024年2月2日16:25，即 UTC 时间2024年2月2日08:25）：</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2024/02/02 08:00
ZPPP 020800Z 24008MPS 9999 SCT030 BKN043 14/01 Q1018 NOSIG
</code></pre></div></div> <p>如果我们想要用后端程序抓取，也很简单，我们套用前面的那段代码，修改 URL 地址：</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">requests</span>

<span class="n">URL</span> <span class="o">=</span> <span class="sh">'</span><span class="s">https://tgftp.nws.noaa.gov/data/observations/metar/stations/ZPPP.TXT</span><span class="sh">'</span>

<span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">URL</span><span class="p">)</span>
<span class="n">datetimestr</span><span class="p">,</span> <span class="n">metar</span> <span class="o">=</span> <span class="n">resp</span><span class="p">.</span><span class="n">text</span><span class="p">.</span><span class="nf">strip</span><span class="p">().</span><span class="nf">split</span><span class="p">(</span><span class="sh">'</span><span class="se">\n</span><span class="sh">'</span><span class="p">)</span>
</code></pre></div></div> <p>这就可以既得到原始 METAR 报文，也得到了准确的时间信息（METAR 报文不提供年和月的信息）。你只需要替换 URL 中的 ICAO 码（即 ZPPP）即可。但是要注意的是 NWS 只能提供大型国际机场的 METAR 报，提供不了国内非国际机场的的数据。但是 NWS 提供的数据稳定性是有保障的，而且对于爬虫的容忍度相对较高。</p> <h2 id="爱荷华州立大学"> <a href="#爱荷华州立大学" class="anchor-head"></a> 爱荷华州立大学 </h2> <p>爱荷华州立大学提供了一个可以下载长周期历史回溯的 METAR 报文归档查询的服务。</p> <p>网址：<a href="https://mesonet.agron.iastate.edu/request/download.phtml?network=CN__ASOS">https://mesonet.agron.iastate.edu/request/download.phtml?network=CN__ASOS</a></p> <p><img src="/assets/img/recommend-metar-data-sources/08.webp" alt="08" /></p> <p>根据网站的自我介绍：</p> <blockquote> <p>IEM维护着一个不断增长的全球机场天气自动观测数据档案库！这些观测通常被称为“ASOS”或有时是“AWOS”传感器。一个更通用的术语可能是METAR数据，这是一个描述数据传输格式的术语。如果您在请求数据时没有获得数据，请随时联系我们寻求帮助。IEM还拥有美国ASOS（2000年至今）和艾奥瓦州AWOS（1995-2011年）站点的一分钟间隔数据集。这个档案仅提供历史观测数据的原始收集，几乎没有进行质量控制。有关这个数据集的更多详情在这里。</p> <p>数据来源：此页面上提供的数据来自多个来源，包括：Unidata IDD、NCEI ISD和MADIS One Minute ASOS。</p> </blockquote> <p>我们可以根据需要选择国家（Select Network）、机场代码、所查询的要素以及时间区间，然后点击 <strong>Get Data</strong> ，即可获得相应的所在区间的相应信息（如果存在）。</p> <p><img src="/assets/img/recommend-metar-data-sources/09.webp" alt="09" /></p> <p>比如如果我查询北京首都机场的 METAR 报文，最远甚至可以查询到 1973 年。</p> <p><img src="/assets/img/recommend-metar-data-sources/10.webp" alt="10" /></p> <p>因此，如果你想做一些大型机场的历史气象研究又苦于拿不到长周期的历史观测数据，可以到这里来下载，且完全公开免费。</p> <h2 id="ogimetcom"> <a href="#ogimetcom" class="anchor-head"></a> ogimet.com </h2> <p>主页：<a href="https://ogimet.com">https://ogimet.com</a></p> <p><img src="/assets/img/recommend-metar-data-sources/11.webp" alt="11" /></p> <p>ogimet.com 是一个提供公共气象数据的简陋小网站，但是内部能够提供的气象数据相当的丰富，甚至 54511（WMO位于北京的国际交换站编号）的最新探空数据都可以在上面查到。原网站是西班牙语的，这里用 ChatGPT 翻译了一下它的自我介绍：</p> <blockquote> <p>这是 www.ogimet.com 的气象信息服务，它使用在网络上公开可用的数据，主要来自 NOAA，以及开源软件来处理这些数据。这个网站的目标是以快速和专业的方式为用户提供最新的气象信息。这个服务器通过一条相对狭窄的带宽连接到互联网。所有内容都运行在您可以在这里看到的一台PC上。请不要滥用请求大量信息。</p> <p>我们正在努力为这个网站添加新的页面和服务。我们的愿望是它们能够有所帮助。</p> </blockquote> <p>当然网页自我介绍里说了不希望滥用请求，就说明该网站在稳定性上无法得到保证，很有可能随时被爬虫抓崩。但是我们仍然可以把它作为一个备用数据源，具体的查询页面是：<a href="https://www.ogimet.com/umetars.phtml.en">https://www.ogimet.com/umetars.phtml.en</a>，以这个网址访问，页面就会按照英文显示了。</p> <p><img src="/assets/img/recommend-metar-data-sources/12.webp" alt="12" /></p> <p>我们可以按照国家来选择要获取的 METAR 报文信息，它会返回该国家最新的 METAR 报文，例如我选 China，它会返回中国大陆地区的所有机场报文。</p> <p><img src="/assets/img/recommend-metar-data-sources/13.webp" alt="13" /> <img src="/assets/img/recommend-metar-data-sources/14.webp" alt="14" /></p> <p>出于一种礼貌的保护，我就不在这里演示使用后端程序抓取了。</p> <h2 id="skyvectorcom"> <a href="#skyvectorcom" class="anchor-head"></a> skyvector.com </h2> <p>主页：<a href="https://skyvector.com">https://skyvector.com</a></p> <p>skyvector.com 是一个提供了丰富可视化的航空服务网站，它的特点是提供了自己绘制的精美的全球航空瓦片地图，在底图中绘制了航空行业的很多更专业的信息。同时也提供全球机场的 METAR 报文数据。</p> <p><img src="/assets/img/recommend-metar-data-sources/15.webp" alt="15" /></p> <p>但是该网站的服务性能并不优秀，网页加载速度较慢。但是该网站的架构是前后端分离的，没有特别的反爬防御，可以通过抓包的方式高效抓取数据，但在这里不做演示。</p> <h2 id="metar-tafcom"> <a href="#metar-tafcom" class="anchor-head"></a> metar-taf.com </h2> <p>主页：<a href="https://metar-taf.com">https://metar-taf.com</a></p> <p><img src="/assets/img/recommend-metar-data-sources/16.webp" alt="16" /></p> <p>metar-taf.com 是一个商业化的机场气象信息网站，该网站的 UI 设计相当精美。它提供 METAR 报文信息，也提供相应的后端查询接口，但是因为它是一个商业化网站，所以通过后端抓取 METAR 数据是要购买额度的。该网站的反爬虫防御仅做了 User-Agent 识别，因此直接抓取的难度较低，然而它的数据也并不能覆盖中国地区的中小型机场。</p> <p>这里给出一个后端抓取的简单示例：</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">re</span>
<span class="kn">import</span> <span class="n">requests</span>

<span class="k">def</span> <span class="nf">extract_metar</span><span class="p">(</span><span class="n">html</span><span class="p">):</span>
    <span class="n">pattern</span> <span class="o">=</span> <span class="sa">r</span><span class="sh">"</span><span class="s">METAR\s[\w\s\/]+\d{6}Z\s[AUTO\s\dKT\s]+[\dSM\s]+[CLR\s]+[\w\s\/\d]+</span><span class="sh">"</span>

    <span class="n">metars</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nf">findall</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">html</span><span class="p">)</span>
    <span class="k">return</span> <span class="nf">list</span><span class="p">(</span><span class="nf">set</span><span class="p">(</span><span class="n">metars</span><span class="p">))</span>
    
<span class="n">url</span> <span class="o">=</span> <span class="sh">'</span><span class="s">https://metar-taf.com/KBFF</span><span class="sh">'</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="sh">'</span><span class="s">User-Agent</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36</span><span class="sh">'</span><span class="p">}</span>
<span class="n">resp</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
<span class="k">if</span> <span class="n">resp</span><span class="p">.</span><span class="n">ok</span><span class="p">:</span>
  <span class="nf">print</span><span class="p">(</span><span class="n">extract_metar</span><span class="p">,</span> <span class="n">resp</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div></div> <p>结果：</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="sh">'</span><span class="s">METAR KBFF 031353Z AUTO 09004KT 6SM BR OVC005 04/03 A2959 RMK AO2 SLP025 T00390028</span><span class="sh">'</span><span class="p">]</span>
</code></pre></div></div> </div> </article> <!-- unnecessary file, however you can still use for comment section, e.g disqus --> <script src="https://utteranc.es/client.js" repo="username/reponame" issue-term="pathname" label="✨ comment ✨" theme="github-light" crossorigin="anonymous" async ></script> </main> <small class="post-updated-at">更新于 2024-02-03</small> <nav class="post-nav"> <a class="post-nav-item post-nav-prev" href="/elegantly-interpreting-airport-metar-reports/" > <div class="nav-arrow">上一篇</div> <span class="post-title">优雅地解译机场 METAR 报文</span> </a> <a class="post-nav-item post-nav-next" href="/does-delphi-meteo-law-really-exists/"> <div class="nav-arrow">下一篇</div> <span class="post-title">传说中的“德尔菲气象定律”真的存在吗？</span> </a> </nav> <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"> <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script> <script src="https://cdn.bootcdn.net/ajax/libs/blueimp-md5/2.18.0/js/md5.min.js"></script> <div id="gitalk-container"></div> <script> console.log('Gitalk script is running'); console.log('location.href: ', location.href); var gitalk = new Gitalk({ clientID: window._env_.CLIENT_ID, clientSecret: window._env_.CLIENT_SECRET, repo: 'clarmy.github.io', owner: 'Clarmy', admin: ['Clarmy'], id: md5(location.pathname + location.search), distractionFreeMode: false, }); gitalk.render('gitalk-container'); </script> <footer class="footer"> <a class="footer_item" href="/motto">座右铭 <a class="footer_item" href="/resume">个人简介 <a class="footer_item" href="/feed.xml">rss</a> <span class="footer_item">&copy; 2024</span> <small class="footer_copyright"> <!-- Klisé Theme: https://github.com/piharpi/jekyll-klise --> <a href="https://github.com/piharpi/jekyll-klise" target="_blank" rel="noreferrer noopener" >klisé</a > theme on <a href="https://jekyllrb.com" target="_blank" rel="noreferrer noopener" >jekyll</a> </small> </footer> <script src="/assets/js/main.js" defer="defer"></script> </div> </body> </html>
